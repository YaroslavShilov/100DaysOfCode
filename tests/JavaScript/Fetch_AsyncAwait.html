<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>
<body>

</body>
<script>
	const delay = ms => new Promise(r => setTimeout(()=> r(), ms));
	const url = 'https://jsonplaceholder.typicode.com/todos';

	async function fetchAsyncTodos() { //вернёт промис, можем при вызове дописать .then();
		//при компиляции бабел превратит это всё в промисы, по этому и дописываем async

		//отлавливаем ошибки промиса используя async/await
		try { //вместо .then()

			await delay(2000)
			const response = await fetch(url)
			const data = await response.json();
			console.log('Data: ', data);

		} catch(err) { //вместо .catch()
			console.log(err);
		} finally { //вместо .finally()
			console.log('finally')
		}

	}
	fetchAsyncTodos()//.then()
</script>
</html>